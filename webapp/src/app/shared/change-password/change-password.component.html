<div class="container">
  <mat-card>
    <form [formGroup]="form" novalidate>
      <mat-card-title>Changement de mot de passe</mat-card-title>
      <mat-card-subtitle class="subtitle">
        <mat-icon>info_outline</mat-icon>
        <span>Le mot de passe doit contenir un minimum de 10 caractères</span>
      </mat-card-subtitle>
      <mat-card-content>
        <div class="passwords">
          <mat-form-field>
            <input matInput [type]="hide ? 'password' : 'text'" placeholder="Nouveau mot de passe" formControlName="password">
            <mat-icon matSuffix (click)="hide = !hide">{{hide ? 'visibility' : 'visibility_off'}}</mat-icon>
          </mat-form-field>
          <mat-form-field>
            <input matInput [type]="hide ? 'password' : 'text'" placeholder="Confirmation" formControlName="confirmation">
            <mat-icon matSuffix (click)="hide = !hide">{{hide ? 'visibility' : 'visibility_off'}}</mat-icon>
          </mat-form-field>
        </div>
      </mat-card-content>
      <ng-container *ngIf="form.get('password').dirty && form.get('password').touched">
        <mat-error *ngIf="form.get('password').hasError('required')">
          Le mot de passe doit être renseigné.
        </mat-error>
        <mat-error *ngIf="form.get('password').hasError('minlength') || form.get('password').hasError('maxlength')">
          Le mot de passe doit comporter entre 10 et 4096 caractères.
        </mat-error>
        <mat-error *ngIf="form.get('password').hasError('pattern')">
          Le mot de passe ne doit pas contenir de caractères d'espacement.
        </mat-error>
      </ng-container>
      <ng-container *ngIf="form.get('confirmation').dirty && form.get('confirmation').touched">
        <mat-error *ngIf="form.get('confirmation').hasError('required')">
          Le mot de passe doit être renseigné.
        </mat-error>
        <mat-error *ngIf="form.get('confirmation').hasError('minlength') || form.get('confirmation').hasError('maxlength')">
          Le mot de passe doit comporter entre 10 et 4096 caractères.
        </mat-error>
        <mat-error *ngIf="form.get('confirmation').hasError('pattern')">
          Le mot de passe ne doit pas contenir de caractères d'espacement.
        </mat-error>
      </ng-container>
      <mat-error *ngIf="form.hasError('passwordMatchValidator')">
        Le mot de passe et sa confirmation doivent correspondre.
      </mat-error>
      <mat-card-actions>
        <div class="button-container">
          <button type="button" mat-mini-fab (click)="revert()" [disabled]="form.pristine">
            <mat-icon aria-label="Annuler les modification">undo</mat-icon>
          </button>
          <button type="button" mat-mini-fab (click)="generate()">
            <mat-icon aria-label="Générer automatiquement">settings</mat-icon>
          </button>
          <button type="button" mat-mini-fab color="primary" (click)="save()" [disabled]="form.pristine || form.invalid">
            <mat-icon aria-label="Valider la mise à jour">done</mat-icon>
          </button>
        </div>
      </mat-card-actions>
    </form>
    <mat-divider></mat-divider>
    <!-- inject the route action there -->
    <ng-content></ng-content>

  </mat-card>
</div>